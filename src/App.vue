<template>
  <div
    id="app"
    class="min-h-screen bg-gradient-to-br from-food-cream/30 via-amber-50/50 to-orange-50/30"
  >
    <!-- å…¨å±é¡µé¢ä¸æ˜¾ç¤ºå¯¼èˆªæ  -->
    <template v-if="$route.meta.hideNavbar">
      <router-view />
    </template>

    <!-- æ™®é€šé¡µé¢æ˜¾ç¤ºå¯¼èˆªæ  -->
    <el-container v-else class="app-container min-h-screen">
      <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
      <el-header
        class="app-header bg-white/90 backdrop-blur-md border-b border-food-cream/50 shadow-warm"
      >
        <div class="header-content max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <!-- Logoå’Œå“ç‰ŒåŒºåŸŸ -->
          <div class="flex items-center gap-3 mr-8">
            <div
              class="w-10 h-10 bg-gradient-to-br from-food-orange to-food-red rounded-lg flex items-center justify-center shadow-food"
            >
              <span class="text-xl">ğŸ½ï¸</span>
            </div>
            <div>
              <h1 class="text-xl font-bold text-food-brown font-title">æ™ºè†³</h1>
              <p class="text-xs text-food-brown/60">æ™ºèƒ½ç¾é£Ÿå¥åº·é¡¾é—®</p>
            </div>
          </div>

          <!-- å¯¼èˆªèœå• -->
          <el-menu
            :default-active="$route.path"
            mode="horizontal"
            router
            class="nav-menu flex-1 border-none bg-transparent"
            :ellipsis="false"
          >
            <el-menu-item
              index="/ai-diagnosis"
              class="group hover:bg-food-orange/10 rounded-lg mx-1 transition-all duration-200"
            >
              <el-icon class="group-hover:text-food-orange transition-colors">
                <ChatDotRound />
              </el-icon>
              <span class="ml-2">AIé—®è¯Š</span>
            </el-menu-item>
            <el-menu-item
              index="/constitution-diagnosis"
              class="group hover:bg-food-orange/10 rounded-lg mx-1 transition-all duration-200"
            >
              <el-icon class="group-hover:text-food-orange transition-colors">
                <UserFilled />
              </el-icon>
              <span class="ml-2">ä½“è´¨è¯Šæ–­</span>
            </el-menu-item>
            <el-menu-item
              index="/taste-optimization"
              class="group hover:bg-food-orange/10 rounded-lg mx-1 transition-all duration-200"
            >
              <el-icon class="group-hover:text-food-orange transition-colors">
                <Operation />
              </el-icon>
              <span class="ml-2">å£å‘³è°ƒä¼˜</span>
            </el-menu-item>
            <el-menu-item
              index="/recipe-recommendation"
              class="group hover:bg-food-orange/10 rounded-lg mx-1 transition-all duration-200"
            >
              <el-icon class="group-hover:text-food-orange transition-colors"><Star /></el-icon>
              <span class="ml-2">è‡³è†³æ¨è</span>
            </el-menu-item>
            <el-menu-item
              index="/dish-management"
              class="group hover:bg-food-orange/10 rounded-lg mx-1 transition-all duration-200"
            >
              <el-icon class="group-hover:text-food-orange transition-colors"><Menu /></el-icon>
              <span class="ml-2">èœå“ç®¡ç†</span>
            </el-menu-item>
          </el-menu>

          <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
          <div class="header-actions flex items-center">
            <UserProfile />
          </div>
        </div>
      </el-header>

      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <el-main class="app-main p-6">
        <div class="max-w-7xl mx-auto">
          <router-view />
        </div>
      </el-main>
    </el-container>
  </div>
</template>

<script setup>
import { ChatDotRound, UserFilled, Operation, Star, Menu } from '@element-plus/icons-vue'
import UserProfile from './components/UserProfile.vue'
</script>

<style scoped>
.app-header {
  height: 64px !important;
  padding: 0;
}

.header-content {
  display: flex;
  align-items: center;
  height: 100%;
}

/* è¦†ç›–Element Plusèœå•æ ·å¼ */
:deep(.el-menu--horizontal) {
  border-bottom: none !important;
}

:deep(.el-menu--horizontal .el-menu-item) {
  border-bottom: none !important;
  height: 60px;
  line-height: 60px;
  padding: 0 16px;
  color: var(--food-brown);
  font-weight: 500;
}

:deep(.el-menu--horizontal .el-menu-item.is-active) {
  background: var(--food-gradient) !important;
  color: white !important;
  border-radius: 8px;
}

:deep(.el-menu--horizontal .el-menu-item:hover) {
  background: rgba(255, 107, 53, 0.1) !important;
  color: var(--food-primary) !important;
}

:deep(.el-header) {
  padding: 0;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .header-content {
    padding: 0 16px;
  }

  .nav-menu {
    display: none;
  }
}
</style>
